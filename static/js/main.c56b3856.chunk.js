(this["webpackJsonpworker-timer"]=this["webpackJsonpworker-timer"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(14),c=n.n(i),l=(n(21),n(22),n(2)),u=(n(23),n(1)),o=function(e){var t=e.value,n=e.selectorListData,r=e.onChangeSelect;return Object(u.jsxs)("div",{className:"audio-selector--wrapper",children:[Object(u.jsx)("h3",{children:"Audio: "}),Object(u.jsx)("select",{value:t,onChange:r,children:n.map((function(e){return Object(u.jsx)("option",{value:e.value,children:e.text},e.value)}))})]})},s=Object(r.memo)(o),m=n(6),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=Object(r.useRef)(t),a=Object(r.useState)(e),i=Object(m.a)(a,2),c=i[0],l=i[1],u=Object(r.useCallback)((function(e){l(e.target.value)}),[]);return Object(r.useEffect)((function(){n.current&&n.current(c)}),[c]),{val:c,handleSelect:u,setVal:l}},f={LSKey:"WORKER_TIMER_SETTINGS",setLSData:function(e){var t=Object(l.a)({},e),n=this.getLSData();n&&(t=Object(l.a)(Object(l.a)({},n),t)),localStorage.setItem(this.LSKey,JSON.stringify(t))},getLSData:function(){var e=localStorage.getItem(this.LSKey);if(e)return JSON.parse(e)}},h=function(e){var t,n,a=e.selectorListData,i=e.onAudioValueChanged,c=(null===(t=f.getLSData())||void 0===t?void 0:t.selectedAudio)||(null===(n=a[2])||void 0===n?void 0:n.value),o=d(c,i),m=o.val,h=o.handleSelect;return Object(r.useEffect)((function(){f.setLSData({selectedAudio:m})}),[m]),Object(u.jsx)(s,Object(l.a)(Object(l.a)({},e),{},{value:m,onChangeSelect:h}))},v=Object(r.memo)(h);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var O=r.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),j=r.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"});function g(e,t){var n=e.title,a=e.titleId,i=b(e,["title","titleId"]);return r.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,O,j)}var S=r.forwardRef(g);n.p;function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var x=r.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),w=r.createElement("path",{d:"M10 8.64L15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z"});function E(e,t){var n=e.title,a=e.titleId,i=T(e,["title","titleId"]);return r.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,x,w)}var N=r.forwardRef(E);n.p;function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var V=r.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),P=r.createElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"});function I(e,t){var n=e.title,a=e.titleId,i=k(e,["title","titleId"]);return r.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,V,P)}var R=r.forwardRef(I);n.p;function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var A=r.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),D=r.createElement("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"});function U(e,t){var n=e.title,a=e.titleId,i=M(e,["title","titleId"]);return r.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,A,D)}var B=r.forwardRef(U);n.p;function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var _=r.createElement("g",null,r.createElement("path",{d:"M0,0h24v24H0V0z",fill:"none"})),F=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M6,13c0-1.65,0.67-3.15,1.76-4.24L6.34,7.34C4.9,8.79,4,10.79,4,13c0,4.08,3.05,7.44,7,7.93v-2.02 C8.17,18.43,6,15.97,6,13z M20,13c0-4.42-3.58-8-8-8c-0.06,0-0.12,0.01-0.18,0.01l1.09-1.09L11.5,2.5L8,6l3.5,3.5l1.41-1.41 l-1.08-1.08C11.89,7.01,11.95,7,12,7c3.31,0,6,2.69,6,6c0,2.97-2.17,5.43-5,5.91v2.02C16.95,20.44,20,17.08,20,13z"})));function J(e,t){var n=e.title,a=e.titleId,i=z(e,["title","titleId"]);return r.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,_,F)}var K=r.forwardRef(J);n.p;function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var G=r.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Q=r.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"});function X(e,t){var n=e.title,a=e.titleId,i=q(e,["title","titleId"]);return r.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,G,Q)}var Y,Z=r.forwardRef(X),$=(n.p,function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(r.useState)(e),n=Object(m.a)(t,2),a=n[0],i=n[1],c=function(){i((function(e){return!e}))},l=function(){a&&i(!1)};return{toggle:a,setToggle:i,handleToggle:c,handleCloseToggle:l}}),ee=function(e){return Object(u.jsx)("input",Object(l.a)(Object(l.a)({},e),{},{type:"number",style:{width:60,padding:4,fontSize:30,textAlign:"right",border:"none",backgroundColor:"#eee",borderRadius:6}}))},te=function(e){var t=e.isEdit,n=e.paused,r=e.timerName,a=e.timeStr,i=e.timeValues,c=e.onStartPause,l=e.onReset,o=e.onDeleteTimer,s=e.onEditTime,m=e.onToggleEditTime,d=e.onEditTimerName,f=$(!1),h=f.toggle,v=f.handleToggle,p=f.setToggle;return Object(u.jsx)("div",{style:{paddingBottom:8},children:Object(u.jsxs)("div",{className:"timer-wrapper",children:[Object(u.jsxs)("div",{className:"timer-name--wrapper",children:[Object(u.jsxs)("div",{onClick:v,children:[!r&&!h&&Object(u.jsx)("span",{className:"input-timer-name-hint",children:"Double click to add name"}),h?Object(u.jsx)("input",{autoFocus:!0,value:r,placeholder:"Timer Name",onChange:d,onBlur:function(){return p(!1)}}):Object(u.jsx)("p",{children:r})]}),Object(u.jsx)("div",{onDoubleClick:m(!0),children:t?Object(u.jsxs)("form",{style:{display:"flex",alignItems:"center"},onChange:s,children:[Object(u.jsx)(ee,{name:"mins",value:String(i.mins)}),Object(u.jsx)("div",{style:{padding:"0px 4px",fontSize:30,fontWeight:"bolder"},children:" : "}),Object(u.jsx)(ee,{name:"secs",value:String(i.secs)}),Object(u.jsx)(Z,{onClick:m(!1)})]}):Object(u.jsx)("h1",{children:a})})]}),Object(u.jsxs)("div",{className:"button-wrapper",children:[Object(u.jsx)("button",{className:"timer-btn",onClick:function(){return c()},children:n?Object(u.jsx)(N,{}):Object(u.jsx)(R,{})}),Object(u.jsx)("button",{className:"timer-btn",onClick:l,children:Object(u.jsx)(K,{})}),Object(u.jsx)("button",{className:"timer-btn",onClick:o,children:Object(u.jsx)(B,{})})]})]})})},ne="/worker-timer/assets/sounds";!function(e){e.STOP="stop",e.START="start",e.TICK_FROM_WORKER="tick-from-worker"}(Y||(Y={}));var re,ae={mins:5,secs:0},ie=n(3),ce=n(8),le=n(7),ue=n(5),oe=n(4),se=function(){function e(t){Object(ie.a)(this,e),this._state=void 0,this._prevState=void 0,this.listeners=void 0,this._state=t,this._prevState=t,this.listeners=[]}return Object(ce.a)(e,[{key:"state",get:function(){return this._state}},{key:"checkShouldUpdateByListener",value:function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n],a=t(this.state)[n];if(JSON.stringify(r)!==JSON.stringify(a))return!0}return!1}},{key:"getNewState",value:function(e){return"function"===typeof e?e(this.state):e}},{key:"compareStateIsSame",value:function(e){return JSON.stringify(this._prevState)===JSON.stringify(e)}},{key:"syncPrevState",value:function(){this._prevState=JSON.parse(JSON.stringify(this.state))}},{key:"syncStateWithPartialNewState",value:function(e){this._state=Object(l.a)(Object(l.a)({},this.state),e)}},{key:"updateState",value:function(e){var t=this,n=this.getNewState(e);this.syncStateWithPartialNewState(n),this.listeners.forEach((function(e,n){if(e.compareValFn&&!t.checkShouldUpdateByListener(e.compareVal,e.compareValFn))return;var r=e.listener(t.state);r&&"object"===typeof r&&t.syncStateWithPartialNewState(r),e.compareValFn&&(e.compareVal=Object(oe.a)(e.compareValFn(t.state)))})),this.syncPrevState()}},{key:"addlistener",value:function(e,t){var n={listener:e,compareValFn:t,compareVal:t?Object(oe.a)(t(this.state)):[]};this.listeners.push(n)}},{key:"removeListener",value:function(e){var t=this.listeners.findIndex((function(t){return t.listener===e}));-1!==t&&this.listeners.splice(t,1)}}]),e}(),me={alarmVolume:.7};!function(e){e.SET_VOLUME="SET_VOLUME"}(re||(re={}));var de=new(function(e){Object(le.a)(n,e);var t=Object(ue.a)(n);function n(e){var r,a;return Object(ie.a)(this,n),(a=t.call(this,Object(l.a)(Object(l.a)(Object(l.a)({},me),e),{},{alarmVolume:(null===(r=f.getLSData())||void 0===r?void 0:r.volume)||me.alarmVolume}))).addlistener((function(e){f.setLSData({volume:e.alarmVolume})}),(function(e){return[e.alarmVolume]})),a}return Object(ce.a)(n,[{key:"dispatch",value:function(e){this.updateState((function(t){return function(e,t){switch(t.type){case re.SET_VOLUME:return Object(l.a)(Object(l.a)({},e),{},{alarmVolume:t.payload.volume});default:return e}}(t,e)}))}}]),n}(se)),fe=function(){var e={timeStrList:[]},t=[];t.push((function(e){var t=e.timeStrList.filter(Boolean);t.length?document.title=t.join(" / "):document.title="Worker Timer!"}));var n=function(n){e=Object(l.a)(Object(l.a)({},e),n),t.forEach((function(t){return t(e)}))};return{handleAddOrUpdateTime:function(t,r){var a=Object(oe.a)(e.timeStrList);a[t]=r,n({timeStrList:a})},handleRemoveTimeUpTime:function(t){var r=Object(oe.a)(e.timeStrList);r.splice(t),n({timeStrList:r})}}}(),he=n(10),ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<10?"0".concat(e):e},n=Math.floor(e/60),r=e%60;return"".concat(t(n),":").concat(t(r))},pe=function(e,t){return 60*e.mins+e.secs-t},be={timerId:0,timerName:"",remainSecs:0,passedSecs:0,paused:!0,timeValues:{mins:1,secs:0},parsedMinSecStr:""},Oe=function(e){Object(le.a)(n,e);var t=Object(ue.a)(n);function n(e){var r;return Object(ie.a)(this,n),(r=t.call(this,Object(l.a)(Object(l.a)({},be),e))).handleResetTimer=function(){console.log("reset"),r.handlePauseTimer(),r.updateState((function(e){return{passedSecs:0}}))},r.handleStartTimer=function(){console.log("timer started"),r.updateState((function(e){return{paused:!1}})),r.timerWorker.postMessage(Y.START)},r.handleStartOrPause=function(e){var t=!r.state.paused;"boolean"===typeof e&&(t=e),t?r.handlePauseTimer():r.handleStartTimer()},r.handleEditTimeVals=function(e,t){r.updateState((function(n){return{timeValues:Object(l.a)(Object(l.a)({},n.timeValues),{},Object(he.a)({},e,Number(t)<0?0:Number(t)))}}))},r.handleEditTimerName=function(e){r.updateState((function(t){return{timerName:e}}))},r.updateByRemainSecs=function(e){e.remainSecs<0&&!e.paused&&(r.handleResetTimer(),e.onTimeupCb&&e.onTimeupCb(r.state))},r.registerUpdatingByTimerWorker(),r.updateState((function(e){return{remainSecs:pe(e.timeValues,e.passedSecs)}})),r.updateState((function(e){return{parsedMinSecStr:ve(e.remainSecs)}})),r.addlistener((function(e){var t=pe(e.timeValues,e.passedSecs);return{remainSecs:t,parsedMinSecStr:ve(t)}}),(function(e){return[e.passedSecs,e.timeValues]})),r.addlistener(r.updateByRemainSecs,(function(e){return[e.remainSecs,e.paused]})),r}return Object(ce.a)(n,[{key:"timerWorker",get:function(){return this.state.timerWorker}},{key:"handlePauseTimer",value:function(){console.log("timer paused"),this.updateState((function(e){return{paused:!0}})),this.timerWorker.postMessage(Y.STOP)}},{key:"handleAddPassedSecs",value:function(){!this.state.paused&&this.updateState((function(e){return{passedSecs:e.passedSecs+1}}))}},{key:"registerUpdatingByTimerWorker",value:function(e){var t=this;if(e&&this.updateState((function(t){return{timerWorker:e}})),this.timerWorker){var n=function(e){e.data===Y.TICK_FROM_WORKER&&t.handleAddPassedSecs()};return this.timerWorker.addEventListener("message",n),function(){t.timerWorker.removeEventListener("message",n),t.timerWorker.postMessage(Y.STOP)}}}}]),n}(se),je=function(e){Object(le.a)(n,e);var t=Object(ue.a)(n);function n(){var e;Object(ie.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleToggle=function(){e.updateState((function(e){return{toggle:!e.toggle}}))},e.setToggle=function(t){e.updateState({toggle:t})},e}return n}(se),ge=function(e){var t=Object(r.useState)(e.state),n=Object(m.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){var t=function(e){i(e)};return e.addlistener(t),function(){return e.removeListener(t)}}),[e]),a},Se=function(e){var t=e.timerName,n=e.timerId,a=e.initTimeVals,i=e.onTimeValuesChanged,c=e.onTimerNameChanged,u=e.onTimerEnd,o=ge(de),s=Object(r.useRef)(),m=Object(r.useRef)(new Oe({timerId:n,timerName:t,timeValues:a||ae,onTimeupCb:function(e){u({volume:de.state.alarmVolume}),fe.handleRemoveTimeUpTime(e.timerId)}})),d=ge(m.current),f=Object(r.useRef)(new je({toggle:!1})),h=ge(f.current),v=m.current.handleStartOrPause,p=Object(r.useCallback)((function(e){i&&i(n,Object(l.a)({},e))}),[i,n]);return Object(r.useEffect)((function(){s.current=new Worker("/worker-timer/js/worker.js"),m.current.registerUpdatingByTimerWorker(s.current),m.current.addlistener((function(e){fe.handleAddOrUpdateTime(e.timerId,e.parsedMinSecStr)}),(function(e){return[e.parsedMinSecStr,e.timerId]}))}),[]),Object(r.useEffect)((function(){var e=function(e){console.log(e.timerName),c(n,e.timerName)};return m.current.addlistener(e,(function(e){return[e.timerName]})),function(){return m.current.removeListener(e)}}),[c,n]),Object(r.useEffect)((function(){var e=function(e){e.toggle||p(m.current.state.timeValues)};return f.current.addlistener(e,(function(e){return[e.toggle]})),function(){return f.current.removeListener(e)}}),[p]),{ctxState:o,toggleState:h,timerState:d,getTimerPloc:function(){return m},handleEditTime:function(e){m.current.handleEditTimeVals(e.target.name,e.target.value)},handleEditTimerName:function(e){m.current.handleEditTimerName(e.target.value)},handleStartPause:v,handleReset:m.current.handleResetTimer,handleToggleEditTime:f.current.setToggle}},ye=function(e){var t=Se(e),n=t.ctxState,r=t.toggleState,a=t.timerState,i=t.handleEditTime,c=t.handleEditTimerName,l=t.handleReset,o=t.handleStartPause,s=t.handleToggleEditTime;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{style:{display:"none"},children:n.alarmVolume}),Object(u.jsx)(te,{timerName:a.timerName,isEdit:r.toggle,paused:a.paused,timeStr:a.parsedMinSecStr,timeValues:a.timeValues,onEditTime:i,onEditTimerName:c,onStartPause:o,onReset:l,onDeleteTimer:e.onDeleteTimer,onToggleEditTime:function(e){return function(){return s(e)}}})]})},Te=Object(r.memo)(ye),xe=function(e){var t=e.timerListData,n=e.onAddTimer,r=e.onDeleteTimer,a=e.onTimerNameChanged,i=e.onTimeValuesChanged,c=e.onTimerEnd;return Object(u.jsxs)(u.Fragment,{children:[t.map((function(e){var t=e.timerId,n=e.timeValues,l=e.timerName;return Object(u.jsx)(Te,{timerId:t,timerName:l,initTimeVals:n,onDeleteTimer:function(){return r(t)},onTimeValuesChanged:i,onTimerNameChanged:a,onTimerEnd:c},t)})),Object(u.jsx)("button",{className:"timer-btn",onClick:n,children:Object(u.jsx)(S,{})})]})},we=Object(r.memo)(xe),Ee={LSKey:"worker-timer",defaultTimers:[{timerId:0,timeValues:ae}],getLSData:function(){var e=localStorage.getItem(this.LSKey);if(!e)return this.defaultTimers;var t=JSON.parse(e);return t.length?t:this.defaultTimers},setLSData:function(e){var t=JSON.stringify(e);localStorage.setItem(this.LSKey,t)},getTimersMaxId:function(e){var t=e.map((function(e){return e.timerId}));return Math.max.apply(Math,Object(oe.a)(t))}},Ne={latestId:0,timerList:[]},Le=function(e,t,n){return function(r){var a=Object(oe.a)(JSON.parse(JSON.stringify(r.timerList))),i=r.timerList.findIndex((function(t){return t.timerId===e}));if(-1!==i){var c=a[i];a[i]=Object(l.a)(Object(l.a)({},c),{},{timeValues:t||c.timeValues,timerName:n||c.timerName})}return a}},ke=function(e){Object(le.a)(n,e);var t=Object(ue.a)(n);function n(e){var r;return Object(ie.a)(this,n),(r=t.call(this,Object(l.a)(Object(l.a)({},Ne),e))).makeNewTimer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;return{timerId:e,timerName:"",timeValues:t}},r.listenToTimeListChanged=function(e){return Ee.setLSData(e.timerList),{timerList:e.timerList}},r.handleAddTimer=function(e){r.updateState((function(t){var n=t.latestId+1;return{latestId:n,timerList:[].concat(Object(oe.a)(t.timerList),[r.makeNewTimer(n,e)])}}))},r.handleRemoveTimer=function(e){r.updateState((function(t){return{timerList:t.timerList.filter((function(t){return t.timerId!==e}))}}))},r.addlistener(r.listenToTimeListChanged,(function(e){return[Object(oe.a)(e.timerList)]})),r}return Object(ce.a)(n,[{key:"handleUpdateTimerListByFn",value:function(e){this.updateState((function(t){return{timerList:e(t)}}))}}]),n}(se),Ve=function(){var e=Object(r.useRef)(new ke({latestId:Ee.getTimersMaxId(Ee.getLSData()),timerList:Ee.getLSData()})),t=ge(e.current),n=e.current;return{timerListState:t,handleAddTimer:n.handleAddTimer,handleSetTimeValues:function(t,n){e.current.handleUpdateTimerListByFn(Le(t,n))},handleSetTimerName:function(t,n){e.current.handleUpdateTimerListByFn(Le(t,void 0,n))},handleRemoveTimer:n.handleRemoveTimer}},Pe=function(e){var t=Ve(),n=t.timerListState,r=t.handleAddTimer,a=t.handleRemoveTimer,i=t.handleSetTimeValues,c=t.handleSetTimerName;return Object(u.jsx)(we,Object(l.a)(Object(l.a)({},e),{},{timerListData:n.timerList,onAddTimer:function(){return r()},onDeleteTimer:a,onTimeValuesChanged:i,onTimerNameChanged:c}))},Ie=Object(r.memo)(Pe),Re=n(13),Ce=n.n(Re),Me=n(15),Ae=n(16),De=[{name:"maracaDance",url:ne+"/maracadance.mp3"},{name:"clearQuiz",url:ne+"/clear-quiz.mp3"},{name:"clearStage",url:ne+"/clear-stage.mp3"},{name:"yahaha",url:ne+"/yahaha.mp3"},{name:"heyListen",url:ne+"/zelda-navi-listen.mp3"}],Ue={volume:.4,selectedAudio:De[0].name,audioNameUrlList:De},Be=function(e){Object(le.a)(n,e);var t=Object(ue.a)(n);function n(e){var r;return Object(ie.a)(this,n),(r=t.call(this,Object(l.a)(Object(l.a)({},Ue),e))).audio=void 0,r.getAudioUrl=function(e){return r.state.audioNameUrlList.find((function(t){return t.name===e}))},r.getSelectedAudio=function(){var e;return null===(e=r.getAudioUrl(r.state.selectedAudio))||void 0===e?void 0:e.url},r.handleSetAudioUrl=function(e){r.audio.setAttribute("src",e),r.audio.load()},r.handleAsyncPlay=function(){return r.audio.play(),new Promise((function(e){r.audio.addEventListener("ended",(function(){e("ended")}))}))},r.handlePlay=function(){r.handleRepeatPlay()},r.handleRepeatPlay=function(e){Object(Me.a)(Ce.a.mark((function t(){var n,a,i,c,l,u,o;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e),(null===e||void 0===e?void 0:e.volume)&&(r.audio.volume=null===e||void 0===e?void 0:e.volume),n=r.state.repeatTimes||3,a=!0,i=!1,t.prev=5,l=Object(Ae.a)(Array(n));case 7:return t.next=9,l.next();case 9:return u=t.sent,a=u.done,t.next=13,u.value;case 13:if(o=t.sent,a){t.next=21;break}return o,t.next=18,r.handleAsyncPlay();case 18:a=!0,t.next=7;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(5),i=!0,c=t.t0;case 27:if(t.prev=27,t.prev=28,a||null==l.return){t.next=32;break}return t.next=32,l.return();case 32:if(t.prev=32,!i){t.next=35;break}throw c;case 35:return t.finish(32);case 36:return t.finish(27);case 37:r.handlePause();case 38:case"end":return t.stop()}}),t,null,[[5,23,27,37],[28,,32,36]])})))()},r.handlePause=function(){r.audio.pause()},r.audio=new Audio(r.getSelectedAudio()),r.audio.volume=r.state.volume,r}return n}(se),We=(n(26),{mins:0,secs:0});function ze(e){return Number(e)<0?0:Number(e)}var _e=function(e){var t=e.onReset,n=e.onAlarm,a=Object(r.useRef)(null),i=Object(r.useState)(""),c=Object(m.a)(i,2),l=c[0],o=c[1],s=Se({timerName:"INPUT_TIMER",initTimeVals:We,onTimerEnd:function(){O(),n(),j(),f().current.handleEditTimeVals("mins",String(0)),f().current.handleEditTimeVals("secs",String(0))},onTimerNameChanged:function(){},timerId:~~(1e5*Math.random())}),d=s.timerState,f=s.getTimerPloc,h=s.handleReset,v=s.handleStartPause,p=function(e){var t=e.slice(e.length-2,e.length)||"00",n=e.slice(Math.max(e.length-4,0),e.length-2)||"00",r=e.slice(0,Math.max(e.length-4,0))||"00";return{hour:Number(r),min:Number(n),sec:Number(t),totalSecs:3600*Number(r)+60*Number(n)+Number(t)}}(l),b=function(){var e=ze(p.min),t=ze(p.sec);f().current.handleEditTimeVals("mins",String(e)),f().current.handleEditTimeVals("secs",String(t)),v()};function O(){t&&t(),o("")}function j(){var e;null===(e=a.current)||void 0===e||e.focus()}Object(r.useEffect)((function(){j()}),[]);return Object(u.jsx)("div",{className:"custom-input-timer--wrapper",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{className:"custom-input-timer-text",children:d.parsedMinSecStr}),Object(u.jsx)("input",{ref:a,className:"custom-input-timer",autoFocus:!0,placeholder:"Type time",value:l,onChange:function(e){o(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&b()}}),Object(u.jsx)("button",{onClick:b,children:"Start"}),Object(u.jsx)("button",{onClick:function(){O(),h()},children:"Reset"})]})})},Fe=function(){var e=function(){var e=Object(r.useRef)(new Be({volume:.7,playTimeout:3e3,repeatTimes:3,selectedAudio:"heyListen"})),t=ge(e.current);return{ctx:ge(de),audioPloc:e,audioState:t,handleChangeVolume:function(e){de.dispatch({type:re.SET_VOLUME,payload:{volume:Number(e.target.value)/100}})}}}(),t=e.ctx,n=e.audioPloc,a=e.audioState,i=e.handleChangeVolume;return Object(u.jsxs)("div",{className:"worker-timer-view--wrapper container",children:[Object(u.jsx)("h1",{children:"Worker Timer!"}),Object(u.jsx)(v,{selectorListData:a.audioNameUrlList.map((function(e){return{text:e.name,value:e.url}})),onAudioValueChanged:n.current.handleSetAudioUrl}),Object(u.jsx)("input",{type:"range",id:"volume",name:"volume",min:"0",max:"100",step:"11",value:String(100*t.alarmVolume),onChange:i}),Object(u.jsx)(Ie,{onTimerEnd:n.current.handleRepeatPlay}),Object(u.jsx)(_e,{onAlarm:n.current.handleRepeatPlay,onReset:n.current.handlePause})]})},Je=Object(r.memo)(Fe);var Ke=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(Je,{})})},He=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(Ke,{})}),document.getElementById("root")),He()}},[[27,1,2]]]);
//# sourceMappingURL=main.c56b3856.chunk.js.map